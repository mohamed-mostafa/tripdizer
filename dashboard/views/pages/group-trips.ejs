<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>G2G | Dashboard</title>
  <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
  <!-- Bootstrap 3.3.2 -->
  <link href="/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
  <!-- FontAwesome 4.3.0 -->
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"
  />
  <!-- Ionicons 2.0.0 -->
  <link href="https://code.ionicframework.com/ionicons/2.0.0/css/ionicons.min.css" rel="stylesheet" type="text/css" />
  <!-- Theme style -->
  <link href="/dist/css/AdminLTE.min.css" rel="stylesheet" type="text/css" />
  <!-- AdminLTE Skins. Choose a skin from the css/skins 
         folder instead of downloading all of them to reduce the load. -->
  <link href="/dist/css/skins/_all-skins.min.css" rel="stylesheet" type="text/css" />
  <!-- iCheck -->
  <link href="/plugins/iCheck/flat/blue.css" rel="stylesheet" type="text/css" />
  <!-- Morris chart -->
  <!-- <link href="/plugins/morris/morris.css" rel="stylesheet" type="text/css" /> -->
  <!-- jvectormap -->
  <!-- <link href="/plugins/jvectormap/jquery-jvectormap-1.2.2.css" rel="stylesheet" type="text/css" /> -->
  <!-- Date Picker -->
  <!-- <link href="/plugins/datepicker/datepicker3.css" rel="stylesheet" type="text/css" /> -->
  <!-- Daterange picker -->
  <!-- <link href="/plugins/daterangepicker/daterangepicker-bs3.css" rel="stylesheet" type="text/css" /> -->
  <!-- bootstrap wysihtml5 - text editor -->
  <link href="/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css" rel="stylesheet" type="text/css" />
  <!-- DATA TABLES -->
  <link href="../../plugins/datatables/dataTables.bootstrap.css" rel="stylesheet" type="text/css" />
  <!-- g2g stylesheet -->
  <link href="/g2g/css/g2g.css" rel="stylesheet" type="text/css" />
  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
</head>

<body ng-app="G2GControlCenterApplication" class="skin-blue">
  <div class="wrapper">

    <header class="main-header">
      <% include ../partials/header %>
    </header>

    <!-- Left side column. contains the logo and sidebar -->
    <aside class="main-sidebar">
      <% include ../partials/side %>
    </aside>

    <!-- Contains the navbar and content of the page -->
    <div class="content-wrapper" ng-controller="GroupTripsController">
      <!-- Content Header (Page header) -->
      <section class="content-header">
        <h1>
          HWS Dashboard
          <small>Group Trips</small>
        </h1>
        <ol class="breadcrumb">
          <li>
            <a href="home">
              <i class="fa fa-dashboard"></i> Home</a>
          </li>
          <li class="active">Group Trips</li>
        </ol>
      </section>
      <!-- Main content -->
      <section class="content">
        <!-- Small boxes (Stat box) -->
        <div class="box">
          <div class="box-header">
            <h3 class="box-title">Group Trips</h3>
          </div>
          <!-- /.box-header -->
          <div class="box-body">
            <div class="overlay" ng-show="loading == true">
              <i class="fa fa-refresh fa-spin"></i>
            </div>
            <div class="box-body table-responsive no-padding" ng-show="loading == false">
              <table id="groupTripsTable" class="table table-bordered table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Departure</th>
                    <th>Return</th>
                    <th>Num of Persons</th>
                    <th>Total Cost</th>
                    <th>Is New</th>
                    <th>Is Ended</th>
                  </tr>
                </thead>
                <tbody>
                  <tr ng-repeat="trip in groupTrips">
                    <td>{{trip.enName}}
                      <!-- <a href="javascript:void" ng-click="openEditDialog(trip.id)">{{trip.enName}}</a> -->
                    </td>
                    <td>{{trip.departureDate | date: 'MMM dd, yyyy'}}</td>
                    <td>{{trip.returnDate | date: 'MMM dd, yyyy'}}</td>
                    <td>{{trip.numOfPersons}}</td>
                    <td>{{trip.totalCost}}</td>
                    <td>
                      <input type="checkbox" name="is-new-{{trip.id}}" id="is-new-{{trip.id}}" ng-model="trip.isNew" ng-checked="trip.isNew" ng-change="toggle(trip.id, 'isNew')">
                    </td>
                    <td>
                      <input type="checkbox" name="is-new-{{trip.id}}" id="is-new-{{trip.id}}" ng-model="trip.isEnded" ng-checked="trip.isEnded"
                        ng-change="toggle(trip.id, 'isEnded')">
                    </td>
                  </tr>
                </tbody>
                <tfooter>
                  <tr>
                    <td colspan="7">
                      <button type="button" class="btn btn-primary pull-right" data-toggle="modal" data-target="addModal" ng-click="openAddDialog()">Add Group Trip</button>
                    </td>
                  </tr>
                </tfooter>
              </table>
            </div>
          </div>
          <!-- /.box-body -->
        </div>
        <!-- /.box -->
        <!-- Main row -->
        <div class="row">

          <!-- MODALS -->

          <div class="modal fade" id="addModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                  <h4 class="modal-title" id="myModalLabel">{{editMode ? 'Update' : 'Add'}} Group Trip</h4>
                </div>
                <div class="modal-body">
                  <div class="callout callout-danger" ng-show="serverError==true">
                    <h4>Saving failed!</h4>
                    <p>{{serverErrorMessage}}</p>
                  </div>
                  <form role="form" id="newGroupTripForm" enctype="multipart/form-data">
                    <div class="box-body">
                      <div class="overlay" ng-show="saving == true">
                        <i class="fa fa-refresh fa-spin"></i>
                      </div>
                      <div class="nav-tabs-custom">
                        <ul class="nav nav-tabs">
                          <li class="active">
                            <a href="#basicTab" data-toggle="tab">Basic</a>
                          </li>
                          <li>
                            <a href="#mailSettingsTab" data-toggle="tab">Mail Settings</a>
                          </li>
                        </ul>
                        <div class="tab-content">
                          <div class="tab-pane active" id="basicTab">
                            <div class="form-group" ng-show="saving==false">
                              <label class="control-label text-red" for="itinerary" ng-show="itineraryMissing==true">
                                <i class="fa fa-times-circle-o"></i>Itinerary is missing</label>
                              <label for="itinerary" ng-show="itineraryMissing==false">Itinerary</label>
                              <select class="form-control" id="itinerary" ng-model="newGroupTrip.iternaryId">
                                <option ng-repeat="itinerary in itineraries" ng-value="itinerary.id" ng-selected="itinerary.id === newGroupTrip.iternaryId">{{itinerary.en_name}}</option>
                              </select>
                            </div>
                            <div class="form-group" ng-show="saving==false">
                              <label class="control-label text-red" for="departureDate" ng-show="departureDateMissing==true">
                                <i class="fa fa-times-circle-o"></i>Departure Date is missing</label>
                              <label for="departureDate" ng-show="departureDateMissing==false">Departure Date</label>
                              <input type="date" class="form-control" id="departureDate" format="yyyy-MM-dd" ng-model="newGroupTrip.departureDate">
                            </div>
                            <div class="form-group" ng-show="saving==false">
                              <label class="control-label text-red" for="returnDate" ng-show="returnDateMissing==true">
                                <i class="fa fa-times-circle-o"></i>Return Date is missing</label>
                              <label for="returnDate" ng-show="returnDateMissing==false">Return Date</label>
                              <input type="date" class="form-control" id="returnDate" format="yyyy-MM-dd" ng-model="newGroupTrip.returnDate">
                            </div>
                            <div class="form-group" ng-show="saving==false">
                              <label class="control-label text-red" for="numOfPersons" ng-show="numOfPersonsMissing==true">
                                <i class="fa fa-times-circle-o"></i>Number Of Persons is missing</label>
                              <label for="numOfPersons" ng-show="numOfPersonsMissing==false">Number Of Persons</label>
                              <input type="number" class="form-control" id="numOfPersons" ng-model="newGroupTrip.numOfPersons" min="1" required>
                            </div>
                            <div class="form-group" ng-show="saving==false">
                              <label class="control-label text-red" for="totalCost" ng-show="totalCostMissing==true">
                                <i class="fa fa-times-circle-o"></i>Total Cost is missing</label>
                              <label for="totalCost" ng-show="totalCostMissing==false">Total Cost</label>
                              <input type="number" class="form-control" id="totalCost" ng-model="newGroupTrip.totalCost" min="0" required>
                            </div>
                            <div class="form-group" ng-show="saving==false">
                              <label class="control-label text-red" for="image" ng-show="imageMissing==true">
                                <i class="fa fa-times-circle-o"></i>Image is missing</label>
                              <label for="image" ng-show="imageMissing==false">Image</label>
                              <input type="text" class="form-control" id="image" ng-model="newGroupTrip.image" placeholder="Enter image URI" required>
                            </div>
                          </div>
                          <!-- /.tab-pane -->
                          <div class="tab-pane" id="mailSettingsTab">
                            <div class="form-group" ng-show="saving==false">
                              <label class="control-label text-red" for="mailSubject" ng-show="mailSubjectMissing==true">
                                <i class="fa fa-times-circle-o"></i>Email Subject is missing</label>
                              <label for="mailSubject" ng-show="mailSubjectMissing==false">Email Subject</label>
                              <input type="text" class="form-control" id="mailSubject" ng-model="newGroupTrip.mailSubject" placeholder="Enter Email Subject"
                                required>
                            </div>
                            <div class="form-group" ng-show="saving==false">
                              <label class="control-label text-red" for="mailBody" ng-show="mailBodyMissing==true">
                                <i class="fa fa-times-circle-o"></i>Email Body is missing</label>
                              <label for="mailBody" ng-show="mailBodyMissing==false">Email Body</label>
                              <text-angular id="mailBody" ng-model="newGroupTrip.mailBody" ng-init="newGroupTrip.mailBody = generateMailBody()" placeholder="Enter body"
                                ta-text-editor-class="form-control richtext" ta-html-editor-class="form-control richtext" ta-toolbar="[['h1', 'h2', 'h3', 'p', 'pre', 'quote'],['insertImage','insertLink', 'insertVideo'],['html','wordcount'],['bold', 'italics', 'underline', 'strikeThrough', 'ul', 'ol', 'redo', 'undo', 'clear'],['justifyLeft', 'justifyCenter', 'justifyRight', 'indent', 'outdent']]"></text-angular>
                            </div>
                            <div class="form-group">
                              <label class="control-label" for="mailAttachments">Attachments:
                                <span class="text-red">{{editMode ? 'You have to upload the attachments again!' : ''}}</span>
                              </label>
                              <input type="file" class="form-control" id="mailAttachments" ng-file-model="newGroupTrip.mailAttachments" multiple>
                            </div>
                            <!-- /.form group -->
                          </div>
                        </div>
                        <!-- /.tab-content -->
                      </div>
                    </div>
                    <!-- /.box-body -->
                  </form>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-default pull-left" data-dismiss="modal">Cancel</button>
                  <button type="button" class="btn btn-primary" ng-click="add(true)" ng-show="editMode==false">Save and close</button>
                  <button type="button" class="btn btn-primary" ng-click="add(false)" ng-show="editMode==false">Save and add another</button>
                  <button type="button" class="btn btn-primary" ng-click="edit()" ng-show="editMode==true">Save</button>
                </div>
              </div>
            </div>
          </div>
          <!-- MODALS END -->

        </div>
        <!-- /.row (main row) -->
      </section>
      <!-- /.content -->
    </div>
    <!-- /.content-wrapper -->

    <footer class="main-footer">
      <% include ../partials/footer %>
    </footer>
  </div>
  <!-- ./wrapper -->

  <!-- jQuery 2.1.3 -->
  <script src="/plugins/jQuery/jQuery-2.1.3.min.js"></script>
  <!-- jQuery UI 1.11.2 -->
  <script src="https://code.jquery.com/ui/1.11.2/jquery-ui.min.js" type="text/javascript"></script>
  <!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
  <script>
    $.widget.bridge('uibutton', $.ui.button);
  </script>
  <!-- Bootstrap 3.3.2 JS -->
  <script src="/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
  <!-- Morris.js charts -->
  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script> -->
  <!-- <script src="/plugins/morris/morris.min.js" type="text/javascript"></script> -->
  <!-- Sparkline -->
  <!-- <script src="/plugins/sparkline/jquery.sparkline.min.js" type="text/javascript"></script> -->
  <!-- jvectormap -->
  <!-- <script src="/plugins/jvectormap/jquery-jvectormap-1.2.2.min.js" type="text/javascript"></script> -->
  <!-- <script src="/plugins/jvectormap/jquery-jvectormap-world-mill-en.js" type="text/javascript"></script> -->
  <!-- jQuery Knob Chart -->
  <!-- <script src="/plugins/knob/jquery.knob.js" type="text/javascript"></script> -->
  <!-- daterangepicker -->
  <!-- <script src="/plugins/daterangepicker/daterangepicker.js" type="text/javascript"></script> -->
  <!-- datepicker -->
  <!-- <script src="/plugins/datepicker/bootstrap-datepicker.js" type="text/javascript"></script> -->
  <!-- Bootstrap WYSIHTML5 -->
  <script src="/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js" type="text/javascript"></script>
  <!-- iCheck -->
  <script src="/plugins/iCheck/icheck.min.js" type="text/javascript"></script>
  <!-- Slimscroll -->
  <script src="/plugins/slimScroll/jquery.slimscroll.min.js" type="text/javascript"></script>
  <!-- FastClick -->
  <script src='/plugins/fastclick/fastclick.min.js'></script>
  <!-- AdminLTE App -->
  <script src="/dist/js/app.min.js" type="text/javascript"></script>

  <!-- AdminLTE dashboard demo (This is only for demo purposes) -->
  <!-- <script src="/dist/js/pages/dashboard.js" type="text/javascript"></script> -->

  <!-- AdminLTE for demo purposes -->
  <!-- <script src="/dist/js/demo.js" type="text/javascript"></script> -->
  <!-- DATA TABES SCRIPT -->
  <script src="../../plugins/datatables/jquery.dataTables.js" type="text/javascript"></script>
  <script src="../../plugins/datatables/dataTables.bootstrap.js" type="text/javascript"></script>

  <!-- angular js library and g2g angular js controllers -->
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.26/angular.min.js"></script>

  <!-- textAngular -->
  <script src='https://cdnjs.cloudflare.com/ajax/libs/textAngular/1.5.0/textAngular-rangy.min.js'></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/textAngular/1.5.0/textAngular-sanitize.min.js'></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/textAngular/1.5.0/textAngular.min.js'></script>
  <script src='https://fastcdn.org/FileSaver.js/1.1.20151003/FileSaver.min.js'></script>

  <script src="/g2g/js/G2GControlCenterApplication.js" type="text/javascript"></script>
  <script src="/g2g/js/GroupTripsController.js" type="text/javascript"></script>
  <script src="/g2g/js/HeaderContentController.js" type="text/javascript"></script>
</body>

</html>